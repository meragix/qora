---
title: In-App Overlay
description: A draggable debug panel that lives inside your Flutter app. Inspect queries, mutations, and optimistic updates without leaving the simulator.
---

The overlay is a floating panel you can open at any time while your app is running. It gives you a real-time view of every query, mutation, and optimistic update — without switching to another tool.

It is **completely removed from release builds**. Adding it to your project has zero impact on your production bundle.

---

## Installation

Add `qora_devtools_overlay` to your **dev dependencies** — not `dependencies`. This ensures it is never shipped to your users.

```yaml [pubspec.yaml]
dev_dependencies:
  qora_devtools_overlay: ^1.0.0
```

---

## Setup

Wrap your root widget with `QoraInspector` and pass your `QueryClient` instance.

```dart [main.dart]
import 'package:qora_devtools_overlay/qora_devtools_overlay.dart';

void main() {
  final client = QueryClient();

  runApp(
    QoraInspector(
      client: client,
      child: MyApp(client: client),
    ),
  );
}
```

That's all. A floating **Q** button will appear in the bottom-right corner of your app in debug mode.

::callout{type="info"}
`QoraInspector` renders nothing in release builds. The guard is applied at the widget level — the entire overlay tree is never constructed outside of `kDebugMode`.
::

---

## The panel

Tap the **Q** button to open the panel. You can drag it anywhere on screen to keep it out of the way.

The panel is organized into three main tabs.

### Queries

Lists every query currently tracked by the `QueryClient`, with their key, status, and last updated time. Use this tab to verify that your queries are being created, cached, and invalidated as expected.

### Mutations

A three-column layout that mirrors the structure of the IDE extension.

**Column 1 — Mutations list**

Shows all mutations with their key, status, and elapsed time. Each row displays:

- A status indicator (green for success, blue for pending, orange for error)
- The query key as a readable breadcrumb — `user › 42 › update`
- An `⚡ Optimistic` badge when an optimistic update was applied
- A `Retries: N` badge when the mutation has been retried

Tap any row to open its detail in column 2.

**Column 2 — Mutation inspector**

Shows the full detail of the selected mutation:

| Section | Content |
|---|---|
| **Status** | Current status badge (`error`, `success`, `pending`) |
| **Actions** | `Retry` button — re-triggers the mutation immediately |
| **Variables** | The input passed to the mutation, expandable |
| **Error** | The error object if the mutation failed, expandable |
| **Rollback context** | The snapshot saved before the optimistic update was applied |
| **Metadata** | Created at, submitted at, updated at, retry count |

**Column 3 — Timeline**

A chronological log of every event in the session: `OptimisticUpdate`, `MutationStarted`, `QueryCreated`, `FetchStarted`, `FetchError`, `MutationError`, `MutationSuccess`.

Each event shows its type, the associated query key, and a precise timestamp down to the millisecond.

Use the toolbar to filter by key or event type, pause the stream, or clear the log.

### Optimistic Updates

Dedicated view for active and past optimistic updates. Shows the key, a preview of the optimistic data applied, and whether the server has confirmed or rolled back the change.

---

## Responsive behavior

The overlay adapts to the available screen size.

- **≥ 600 px** (tablet, desktop) — three-column layout, all panels visible simultaneously.
- **< 600 px** (phone) — single-column navigation. Tap a mutation in the list to slide into the inspector. Tap **Timeline** to slide into the event log. A back button returns to the previous screen.

---

## Configuration

```dart
QoraInspector(
  client: client,
  // Initial position of the FAB from the bottom-right corner
  initialFabOffset: const Offset(16, 120),
  child: MyApp(),
)
```

---

## Production safety

Three independent layers ensure the overlay never reaches production:

**1 — `dev_dependencies`**

The package is physically absent from your release bundle because it lives in `dev_dependencies`.

**2 — Widget guard**

```dart
@override
Widget build(BuildContext context) {
  if (!kDebugMode) return child; // nothing is built in release
  return _buildOverlay();
}
```

**3 — Tracker never instantiated**

The `OverlayTracker` — which opens streams and allocates the ring buffer — is never created outside of debug mode. In release, `QueryClient` uses a `NoOpTracker` whose methods are empty and inlined away by the Dart compiler.

The result: **zero bytes added to your production bundle**.