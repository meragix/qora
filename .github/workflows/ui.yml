name: qora_devtools_ui

on:
  push:
    branches: [main]
    paths:
      - "packages/devtools/ui/**"
      - "packages/devtools/shared/**"
      - ".github/workflows/ui.yml"
      - ".github/workflows/_flutter_package.yml"
  pull_request:
    paths:
      - "packages/devtools/ui/**"
      - "packages/devtools/shared/**"
      - ".github/workflows/ui.yml"
      - ".github/workflows/_flutter_package.yml"

jobs:
  # Format + analyze + test comme les autres
  ci:
    uses: ./.github/workflows/_flutter_package.yml
    with:
      package: packages/devtools/ui
    secrets: inherit

  # Build web — vérifie que la compilation ne casse pas
  # build:
  #   name: "Build Web"
  #   runs-on: ubuntu-latest
  #   needs: ci

  #   steps:
  #     - uses: actions/checkout@v4

  #     - uses: subosito/flutter-action@v2
  #       with:
  #         channel: stable
  #         cache: true

  #     - name: Install dependencies
  #       working-directory: packages/devtools/ui
  #       run: flutter pub get

  #     - name: Build Web
  #       working-directory: packages/devtools/ui
  #       run: |
  #         flutter build web \
  #           --output build/devtools_extension

  #     - name: Upload build artifact
  #       uses: actions/upload-artifact@v4
  #       with:
  #         name: devtools-ui-build
  #         path: packages/devtools/ui/build/devtools_extension
  #         retention-days: 7